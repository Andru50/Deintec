<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Formulario Solicitud de Mantenimiento</title>
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    body {
      font-family: 'Roboto', sans-serif;
      background-color: #131212;
      background-image: url("imagen/fondo.jpg");
      background-size: cover;
      background-repeat: no-repeat;
      margin: 0;
      padding: 0;
      color: #f5f5f5;
    }
    header, nav {
      text-align: center;
      margin-bottom: 20px;
    }
    nav ul {
      list-style: none;
      padding: 0;
      background-color: #d20505;
      margin: 0;
    }
    nav ul li {
      display: inline-block;
      margin: 0;
    }
    nav ul li a {
      display: inline-block;
      color: black;
      padding: 15px 20px;
      text-decoration: none;
      font-weight: 600;
      transition: background-color 0.3s;
      font-size: 1rem;
    }
    nav ul li a:hover {
      background-color: #0056b3;
      color: white;
    }
    form {
      max-width: 600px;
      margin: 20px auto;
      background: rgba(40,40,40,0.9);
      padding: 25px 30px;
      border-radius: 10px;
      box-shadow: 0 12px 25px rgba(0,0,0,0.7);
      color: #eee;
    }
    form label {
      font-weight: 600;
      margin-top: 10px;
    }
    form input[type=text], form textarea, form select {
      width: 100%;
      padding: 8px;
      border-radius: 6px;
      border: none;
      margin-top: 5px;
      background-color: #222;
      color: #eee;
      font-size: 1rem;
      resize: vertical;
    }
    form button {
      background-color: #d20505;
      border: none;
      color: black;
      font-weight: 700;
      padding: 12px 20px;
      border-radius: 6px;
      margin-top: 20px;
      cursor: pointer;
      width: 100%;
      font-size: 1.1rem;
      transition: background-color 0.3s;
    }
    form button:hover {
      background-color: #a30000;
      color: white;
    }
    #confirmacion {
      max-width: 600px;
      margin: 15px auto;
      background-color: #28a745;
      color: white;
      padding: 15px;
      border-radius: 8px;
      text-align: center;
      font-weight: 700;
      font-size: 1.2rem;
      box-shadow: 0 0 10px #28a745aa;
      display: none;
    }
  </style>
</head>
<body>

<header>
  <img src="imagen/deintec-imagen.png" alt="Logo" width="350" height="110" />
</header>

<nav>
  <ul>
    <li><a href="formulario.html">Formulario</a></li>
    <li><a href="solicitudes.html">Solicitudes Radicadas</a></li>
  </ul>
</nav>

<form id="form-solicitud">
  <h2>Formulario de Solicitud de Mantenimiento</h2>

  <label for="solicitante">Nombre del Solicitante:</label>
  <input type="text" id="solicitante" name="solicitante" required placeholder="Tu nombre" />

  <label for="descripcion">Descripción:</label>
  <textarea id="descripcion" name="descripcion" rows="4" required placeholder="Describe tu solicitud"></textarea>

  <label for="estado">Estado:</label>
  <select id="estado" name="estado" required>
    <option value="En proceso">En proceso</option>
    <option value="Resuelta">Resuelta</option>
  </select>

  <button type="submit">Enviar Solicitud</button>
</form>

<div id="confirmacion"></div>

<script>
  const form = document.getElementById('form-solicitud');
  const confirmacion = document.getElementById('confirmacion');

  function generarNumeroRadicado() {
    const now = new Date();
    const yyyy = now.getFullYear();
    const mm = String(now.getMonth() + 1).padStart(2, '0');
    const dd = String(now.getDate()).padStart(2, '0');
    const hh = String(now.getHours()).padStart(2, '0');
    const min = String(now.getMinutes()).padStart(2, '0');
    const ss = String(now.getSeconds()).padStart(2, '0');
    const random = String(Math.floor(Math.random() * 10000)).padStart(4, '0');
    return `RAD-${yyyy}${mm}${dd}-${hh}${min}${ss}-${random}`;
  }

  form.addEventListener('submit', (e) => {
    e.preventDefault();

    const solicitante = form.solicitante.value.trim();
    const descripcion = form.descripcion.value.trim();
    const estado = form.estado.value;

    if (!solicitante || !descripcion) {
      alert('Por favor complete todos los campos.');
      return;
    }

    const fecha = new Date().toISOString().split('T')[0];
    const numeroRadicado = generarNumeroRadicado();

    const nuevaSolicitud = {
      fecha,
      solicitante,
      descripcion,
      estado,
      numeroRadicado,
    };

    // Obtener array actual o crear nuevo
    const solicitudes = JSON.parse(localStorage.getItem('solicitudes')) || [];
    solicitudes.push(nuevaSolicitud);
    localStorage.setItem('solicitudes', JSON.stringify(solicitudes));

    form.reset();

    confirmacion.textContent = `¡Solicitud enviada con éxito! Número de radicado: ${numeroRadicado}`;
    confirmacion.style.display = 'block';
  });
</script>

</body>
</html>

